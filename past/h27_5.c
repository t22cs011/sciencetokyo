#include <stdio.h>

// 共通のヘルパー関数
int max(int x, int y) {
    return x > y ? x : y;
}

// -----------------------------------------------------
// 図5.1 のコード (O(n^3) アルゴリズム)
// -----------------------------------------------------
int sum(int a[], int i, int j) {
    int s = 0;
    for (int k = i; k <= j; k++) {
        s = s + a[k];
    }
    return s;
}

int f_v1(int a[], int n) {
    int s = a[0];
    for (int i = 0; i < n; i++) {
        for (int j = i; j < n; j++) {
            s = max(s, sum(a, i, j));
        }
    }
    return s;
}

// -----------------------------------------------------
// 図5.2 のコード (O(n^2) アルゴリズム)
// -----------------------------------------------------
int f_v2(int a[], int n) {
    int s = a[0];
    for (int i = 0; i < n; i++) {
        int t = 0;
        for (int j = i; j < n; j++) {
            t = t + a[j];
            s = max(s, t);
        }
    }
    return s;
}

// -----------------------------------------------------
// 図5.3 のコード (O(n^2) アルゴリズム)
// -----------------------------------------------------
int g_for_v3(int a[], int n) {
    int t = a[0];
    for (int k = 1; k < n; k++) {
        t = max(t + a[k], a[k]);
    }
    return t;
}

int f_v3(int a[], int n) {
    if (n <= 0) return 0;
    if (n == 1) return a[0];

    int s = a[0];
    for (int k = 1; k < n; k++) {
        s = max(s, g_for_v3(a, k + 1));
    }
    return s;
}

// -----------------------------------------------------
// 図5.4 のコード (O(n) アルゴリズム)
// -----------------------------------------------------
int f_v4(int a[], int n) {
    if (n <= 0) return 0;
    int t, s;
    t = s = a[0];
    for (int k = 1; k < n; k++) {
        t = max(t + a[k], a[k]);
        s = max(s, t);
    }
    return s;
}

// -----------------------------------------------------
// メイン関数 (各バージョンを実行して結果を比較)
// -----------------------------------------------------
int main() {
    // 問題文のサンプルデータ
    int a[] = {20, -24, 36, 3, -7, 27, -40, 37, -28, 6};
    int n = sizeof(a) / sizeof(a[0]);

    printf("--- 各アルゴリズムの実行結果 ---\n");

    // 各関数を呼び出し、結果を出力
    printf("図5.1 (O(n^3)) の結果: %d\n", f_v1(a, n));
    printf("図5.2 (O(n^2)) の結果: %d\n", f_v2(a, n));
    printf("図5.3 (O(n^2)) の結果: %d\n", f_v3(a, n));
    printf("図5.4 (O(n))   の結果: %d\n", f_v4(a, n));

    return 0;
}